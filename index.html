<html>
<head>
<title>.</title>
<link rel="stylesheet" type="text/css" href="style.css">

</head>
<body>
<div id="scrollable"></div>
<div id="container">
    
    <div id="contentwrap" class="">
        <div class="content md animateblock" id="home"><div class="before"></div>
            <div class="inner">
                <div class="sectionhead">
                    <img src="http://s133p.github.io/CV.png"><br/>
                    <hr/><br/>
                </div>
            </div>
            <div class="after"></div></div>
        <div class="content sm animateblock" id="work"></div>
        <div class="content md animateblock" id="cv">
            <div class="before"></div>
            <div class="inner animateblock">
                <h2>SKILLS</h2>
                <h3>GENERAL</h3>
                <ul>
                    <li>Design Thinking</li>
                    <li>Excellent Written & Visual Communication</li>
                    <li>Detail Oriented</li>
                    <li>Efficient Workflow</li>
                </ul>
                <h3>3D</h3>
                <ul>
                    <li>Physical Modeling & Prototyping</li>
                    <li>Modeling</li>
                    <li>Texturing</li>
                    <li>Lighting</li>
                    <li>3D Rendering</li>
                </ul>
                <h3>2D</h3>
                <ul>
                    <li>Web & Print Design</li>
                    <li>Drawing & Painting</li>
                    <li>Typography</li>
                </ul>
                <h3>TECHNICAL</h3>
                <ul>
                    <li>Web Development</li>
                    <li>Embedded Systems Programming</li>
                    <li>Data-Viz / Interactive Media</li>
                </ul>
            </div>
            <div class="after"></div>
        </div>
        <div class="content sm animateblock" id="blog"></div>
    </div>

    
    <div id="sidenav">
        <!--<img id="cutout" src="Combined Shape 2.png" />
        <img id="logo" src="Polygon 1.png" />-->
        
        <nav>
            <!--<div class="innersn"></div>-->
            
            <div class='links'>
                <a href="#home" class="selected animateblock">HOME</a>
                <a href="#work" class="animateblock">WORK</a>
                <a href="#cv" class="animateblock">CV</a>
                <a href="#blog" class="animateblock">BLOG</a>
            </div>
            <!--<div class="outersn"></div>-->
        </nav>
    </div>
    
</div>
    
<script src="./jquery.js"></script>
<script>
    

$(document).ready(function() {

    var iOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;
    
    function re_sz() {
        cw = 0;
        //var $content = $('.content');
        var lastIndex = $('.content').length - 1;
        
        cw = $($('.content')[lastIndex]).position().left + $(window).width();

        $('#scrollable').css('height', cw + 'px');
        //$(window).scrollTop( p*h );
    }

    var $elems = $('.animateblock');

    var cw = 0;
    var curIndex = 0;
    
    
    //TODO: side-tab nav for iphone
    if(iOS){
        $('#container').scroll(function() {
            var scrollLeft = $('#container').scrollLeft();
            
            $('.content').each( function(index){
                var l = $(this).position().left;
                if (index!=0){l-=85;}
                var w = $(this).width();


                if (scrollLeft > l && scrollLeft < l+w){
                    var cID = $(this).attr("id") ;
                    $('nav a').removeClass('selected');
                    $('a[href$="#'+cID+'"]').addClass('selected');
                    window.location.hash = cID;
                }
            });
            
        });
    }else{
        re_sz();
        $(window).resize(re_sz());
        
        $(window).scroll(function(e) {
            e.preventDefault(); 
            var scrollTop = $(window).scrollTop();
            $("#contentwrap").css('left', '-' + scrollTop + 'px');
            
            $('.content').each( function(index){
                var l = $(this).position().left;
                if (index!=0){l-=85;}
                var w = $(this).width();


                if (scrollTop >= l && scrollTop < l+w){
                    var cID = $(this).attr("id") ;
                    $('nav a').removeClass('selected');
                    $('a[href$="#'+cID+'"]').addClass('selected');
                    window.location.hash = cID;
                }
            });

        });
    }

    
    function navto( n_id ) {
        //Get left pos of element to scroll to, accounting for padding on first element
        var ll = $(n_id).position().left;
        if ($(this).index() != 0) {ll-=80;}

        if(iOS){
            $('#container').scrollLeft(ll);
        }else{
            $('#contentwrap').addClass('animateblock');
            $(window).scrollTop(ll);
            //$('#contentwrap').addClass('animateblock');
            //$(window).scrollTop( (ll/cw)*$(document).height() );
            setTimeout( function(){$('#contentwrap').removeClass('animateblock');}, 180);
        }
    }
    
    
    $('nav a').click(function(e) {
        e.preventDefault(); 
        navto( $(this).attr('href') );
    });
    
    if(iOS){}
    else{
        $('.content').click(function() {
            if ( $(this).hasClass('sm') )
            {
                $(this).removeClass('sm');
                $(this).addClass('md');
            }else if ($(this).hasClass('md')) {
                $(this).removeClass('md');
                $(this).addClass('lg');
            }else{
                $(this).removeClass('lg');
                $(this).addClass('sm');
            }
            setTimeout( re_sz, 300 );
        });
    }
    
    //window.location.hash = '#home';
    if(window.location.hash){navto(window.location.hash);}
});

</script>
</body>
</html>
