<html>
  <head>
    <link rel="stylesheet" href="./codebase/webix.css" type="text/css">
    <link rel="stylesheet" href="./demo.css" type="text/css">
    <script src="http://code.jquery.com/jquery-1.7.1.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="./codebase/webix.js" type="text/javascript"></script>  
  </head>
  <body>
      <div id="header">
      <span id="head"><a href="index.html"><h1><img src="./images/horse.png" height="80px" />Tur</h1></a></span>
    </div>
    <div id="layout_div">
        <!--<div id="box"></div>
        <div id="sidebar"></div>-->
    </div>

    <script type="text/javascript" charset="utf-8">
      var z = null;
      var x = null;
      webix.ready(function(){
          lay = webix.ui({
            container:"layout_div",
            id:"mylayout",
            //type:"space",
            responsive:true,
            height: ($( document ).height()-55),
            rows:[
                {template:"<div id='ribbon'/>", height: 70},
                {cols:[
                    {template:"<div id='box'/>"},
                    {template:"<div id='sidebar'/>", width: 400}
                ]}
            ]
            });
          grida = new webix.ui({
            container:"box",
            view:"datatable",
            editable:true,
            editaction:"dblclick",
            select: "cell", multiselect: true,
            math: true,
            editMath:true,
            columns:[
                { id:"Product",  header:"Product",editor:"text"},
                { id:"Price", header:"Price",editor:"text"},
                { id:"Payment_Type",  header:"Payment Type", fillspace:1, editor:"text"},
                { id:"Name", header:"Name", adjust:"data", fillspace:1, editor:"text"},
                { id:"State", header:"State", editor:"text"},
                { id:"Account_Created", header:"Account Created", fillspace:1, editor:"text" },
                { id:"G", header:"G", editor:"text"},
                { id:"H", header:"H", editor:"text"},
                { id:"I", header:"I", editor:"text"}
                ],
            autoheight:true,
            onContext:{},
            //autowidth:true,
            url:"sales.json"
            });
          
          form = webix.ui({
            view:"form", 
            container:"ribbon",
            //height: 5,
            elements:[
                {cols:[
                    { view:"text", label:"F(x):", id:"f_x" },
                    { view:"button", type: "image", image:"../images/filter24.png", width: 40},
                    { view:"button", type: "image", image:"../images/sort24.png", width: 40},
                    { view:"button", type: "image", image:"../images/chain.png", width: 40},
                    { view:"button", type: "image", image:"../images/chart-512.png", width: 40},
                    { view:"button", type: "image", image:"../images/integral.png", width: 40},
                    { view:"button", type: "image", image:"../images/spark-plug.png", width: 40},
                    { view:"button", type: "image", image:"../images/tag-1.png", width: 40},
                    { view:"button", type: "image", image:"../images/tag-2.png", width: 40},
                    { view:"button", type: "image", image:"../images/cube.svg", width: 40, id:'workflow'}
                ]}
                ]
            });
            var myEvent = grida.attachEvent("onItemClick", function (id){
                z = this.getSelectedId();
                if( z.column == "Price" )
                {
                    $("#sidebar").html("Price!");
                }else
                {
                    $("#sidebar").html("");
                }
            });
            
            $$("workflow").attachEvent("onItemClick", function (id){
                window.location.href = './workflow.html';
            });
          
            webix.ui({
                view:"contextmenu",
                data:[
                    "Comment",
                    "Add Trigger",
                    "Apply Formula"
                ],
                master:"box" //  ID of a DIV container
            });
          
            x = webix.ui({
                view:"context",
                data:[
                    "Comment",
                    "Add Trigger",
                    "Apply Formula"
                ],
                left:120,
                top:120,
                width: 500,
                autofocus: false,
                master:"ribbon" //  ID of a DIV container
            });
          
            var myEvent = $$("f_x").attachEvent("onItemClick", function (id){
                x.show();
                /*z = grida.getSelectedId();
                x = grida.getItem(z);
                alert( z.column );
                $('input').attr('value', 'potato');*/
            });
            var myEvent = $$("f_x").attachEvent("onBlur", function (id){
                x.hide();
                /*z = grida.getSelectedId();
                x = grida.getItem(z);
                alert( z.column );
                $('input').attr('value', 'potato');*/
            });
            $(".webix_image").css('background-size', '30px 30px');
          });
        $('.webix_view').css("margin-left", "0px");
        $('.webix_view').css("margin-top", "0px");
        webix.event(window, "resize", function(){ lay.adjust(); grida.adjust();  })
    </script>
  </body>
</html>
